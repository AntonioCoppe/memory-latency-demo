<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Memory Latency Motherboard Layout</title>
  <style>
    body { background: #1e1e1e; color: #eee; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; margin:0; padding:0; }
    h1 { margin: 20px 0; }
    #board {
      position: relative;
      width: 1200px;
      height: 700px;
      background: #2c2c2c;
      border: 4px solid #444;
    }
    .mem {
      position: absolute;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: #fff;
      font-size: 12px;
      user-select: none;
    }
    .label { pointer-events: none; }

    /* CPU and caches cluster */
    #l3 { width: 340px; height: 340px; border: 2px dashed #8e24aa; top: 180px; left: 430px; }
    #l2 { width: 280px; height: 280px; border: 2px dashed #5e35b1; top: 210px; left: 460px; }
    #l1 { width: 220px; height: 220px; border: 2px dashed #3949ab; top: 240px; left: 490px; }
    #cpu-socket { width: 160px; height: 160px; background: #2196f3; top: 280px; left: 520px; }
    #regs { width: 80px; height: 80px; background: #f44336; top: 310px; left: 550px; }

    /* RAM slots */
    .ram-slot { width: 40px; height: 200px; background: #4caf50; }
    #ram1 { top: 240px; left: 780px; }
    #ram2 { top: 240px; left: 830px; }
    #ram3 { top: 240px; left: 880px; }
    #ram4 { top: 240px; left: 930px; }

    /* SSD & HDD */
    #ssd { width: 100px; height: 60px; background: #ff9800; top: 480px; left: 800px; }
    #hdd { width: 120px; height: 50px; background: #795548; top: 550px; left: 780px; }

    /* Network latencies */
    #net-nyc { width: 100px; height: 30px; background: #009688; top: 580px; left: 20px; }
    #net-uk  { width: 100px; height: 30px; background: #009688; top: 620px; left: 20px; }
    #net-aus { width: 120px; height: 30px; background: #009688; top: 660px; left: 20px; }

    /* Virtualization & reboot events */
    #os     { width: 120px; height: 30px; background: #e91e63; top: 580px; left: 1040px; }
    #scsi   { width: 120px; height: 30px; background: #ff5722; top: 620px; left: 1040px; }
    #hwv    { width: 120px; height: 30px; background: #cc7722; top: 660px; left: 1040px; }
    #phy    { width: 140px; height: 30px; background: #212121; top: 700px; left: 1040px; }

    /* Packet styling */
    .packet { width: 12px; height: 12px; background: #ffeb3b; position: absolute; border-radius: 2px; }
  </style>
</head>
<body>
  <h1>Memory Latency on a Motherboard</h1>
  <div id="board">
    <!-- CPU cluster -->
    <div id="l3" class="mem" data-lat="L3"><span class="label">L3</span></div>
    <div id="l2" class="mem" data-lat="L2"><span class="label">L2</span></div>
    <div id="l1" class="mem" data-lat="L1"><span class="label">L1</span></div>
    <div id="cpu-socket" class="mem" data-lat="CPU"><span class="label">CPU</span></div>
    <div id="regs" class="mem" data-lat="Registers"><span class="label">Regs</span></div>

    <!-- RAM -->
    <div id="ram1" class="mem ram-slot" data-lat="RAM"><span class="label">RAM</span></div>
    <div id="ram2" class="mem ram-slot" data-lat="RAM"><span class="label">RAM</span></div>
    <div id="ram3" class="mem ram-slot" data-lat="RAM"><span class="label">RAM</span></div>
    <div id="ram4" class="mem ram-slot" data-lat="RAM"><span class="label">RAM</span></div>

    <!-- Storage -->
    <div id="ssd" class="mem" data-lat="SSD"><span class="label">SSD</span></div>
    <div id="hdd" class="mem" data-lat="HDD"><span class="label">HDD</span></div>

    <!-- Network -->
    <div id="net-nyc" class="mem" data-lat="Net_NYC"><span class="label">SF→NYC</span></div>
    <div id="net-uk"  class="mem" data-lat="Net_UK"><span class="label">SF→UK</span></div>
    <div id="net-aus" class="mem" data-lat="Net_AUS"><span class="label">SF→AUS</span></div>

    <!-- Reboots & timeouts -->
    <div id="os"   class="mem" data-lat="OS"><span class="label">OS Reboot</span></div>
    <div id="scsi" class="mem" data-lat="SCSI"><span class="label">SCSI Timeout</span></div>
    <div id="hwv"  class="mem" data-lat="HW"><span class="label">HW Virt</span></div>
    <div id="phy"  class="mem" data-lat="PHYS"><span class="label">System Reboot</span></div>
  </div>

  <script>
    // Precomputed animation durations (ms) on a log scale
    const durations = {
    Registers: 3,        // 0.0000003 × 10000
    CPU:       3,        // 0.0000003 × 10000
    L1:        9,        // 0.0000009 × 10000
    L2:        2.8,        // 0.0000028 × 10000
    L3:        12.9,        // 0.0000129 × 10000
    RAM:       120,          // 0.00012 × 10000
    SSD:       100000,         // 0.1 × 10000
    HDD:       5500000,        // 5.5 × 10000
    Net_NYC:   40000000,       // 40 × 10000
    Net_UK:    81000000,       // 81 × 10000
    Net_AUS:   183000000,      // 183 × 10000
    OS:        4000000000,     // 4000 × 10000
    SCSI:      30000000000,    // 30000 × 10000
    HW:        40000000000,    // 40000 × 10000
    PHYS:      300000000000    // 300000 × 10000
    };


    document.querySelectorAll('.mem').forEach(el => {
      const key = el.dataset.lat;
      if (!(key in durations)) return;
      el.addEventListener('click', () => {
        const packet = document.createElement('div');
        packet.className = 'packet';
        document.body.appendChild(packet);

        const from = el.getBoundingClientRect();
        packet.style.left = from.left + from.width/2 - 6 + 'px';
        packet.style.top  = from.top  + from.height/2 - 6 + 'px';

        const cpuRect = document.getElementById('cpu-socket').getBoundingClientRect();
        const dx = cpuRect.left + cpuRect.width/2 - (from.left + from.width/2);
        const dy = cpuRect.top  + cpuRect.height/2 - (from.top  + from.height/2);

        packet.animate(
          [ { transform: 'translate(0,0)' }, { transform: `translate(${dx}px, ${dy}px)` } ],
          { duration: durations[key], easing: 'linear' }
        ).onfinish = () => packet.remove();
      });
    });
  </script>
</body>
</html>
